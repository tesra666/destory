(window.webpackJsonp=window.webpackJsonp||[]).push([["list"],{"00d6":function(e,t,s){},"0522":function(e,t,s){},2724:function(e,t,s){e.exports=s.p+"img/box-empty.eb00c39e.png"},"541d":function(e,t,s){"use strict";s("00d6")},"54f8":function(e,t,s){"use strict";var r={props:{item:{type:Object,default:function(){}},type:{type:String,default:"user"}}},i=(s("f733"),s("2877")),a=Object(i.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"the-log-item"},[s("div",{staticClass:"head"},[s("span",{staticClass:"date"},[e._v(e._s(e.formatTime(1e3*e.item.timestamp)))]),"user"==e.type||"mer-user"==e.type?s("span",{staticClass:"value"},[e._v("-"+e._s(e.toFixedFloor((e.item.amount||0)/1e18))+"(TSR)")]):e._e(),"merchant"==e.type||"referrer"==e.type?s("span",{staticClass:"value"},[e._v("+"+e._s(e.toFixedFloor((e.item.amount||0)/1e18))+"(DST)")]):e._e()]),"merchant"==e.type||"mer-user"==e.type?s("div",{staticClass:"addr"},[e._v("Referrer: "+e._s(e.item.mid))]):e._e(),"merchant"==e.type||"referrer"==e.type?s("div",{staticClass:"addr"},[e._v("From: "+e._s(e.item.from))]):e._e(),"referrer"==e.type?s("div",{staticClass:"addr"},[e._v("To: "+e._s(e.item.to))]):e._e(),"user"==e.type||"mer-user"==e.type?s("div",{staticClass:"addr"},[e._v("To: "+e._s(e.item.to))]):e._e()])}),[],!1,null,"7b4128fc",null);t.a=a.exports},"58cc":function(e,t,s){"use strict";s.r(t);s("fb6a");var r=s("2909"),i=s("8785"),a=(s("96cf"),s("1da1")),n=s("5184"),o=s("54f8"),c=s("f588"),l=s("a953"),u=s("35ad");function d(){var e=Object(i.a)(["query ($mid: Bytes!, $to: Bytes!, $token: Bytes!, $time: Int!, $first: Int!, $skip: Int!) {\n            logs(where: { mid: $mid, to: $to, token: $token, timestamp_gte: $time }, first: $first, skip: $skip, orderBy: timestamp, orderDirection: desc) {\n                id\n                from\n                to\n                mid\n                token\n                amount\n                timestamp\n              }\n            }"]);return d=function(){return e},e}function h(){var e=Object(i.a)(["query ($from: Bytes!, $to: Bytes!, $token: Bytes!, $time: Int!, $first: Int!, $skip: Int!) {\n            logs(where: { from: $from, to: $to, token: $token, timestamp_gte: $time }, first: $first, skip: $skip, orderBy: timestamp, orderDirection: desc) {\n                id\n                from\n                to\n                mid\n                token\n                amount\n                timestamp\n              }\n            }"]);return h=function(){return e},e}var f={components:{TheLogItem:o.a,TheLogEmpty:c.a},data:function(){return{refreshing:!1,title:"XXX",type:"user",actTab:"wk",pageSize:20,totalResults:0,curAddress:"",wk:{list:[],loading:!1,finished:!1,time:Math.floor((Date.now()-6048e5)/1e3)},m1:{list:[],loading:!1,finished:!1,time:Math.floor((Date.now()-2592e6)/1e3)},m3:{list:[],loading:!1,finished:!1,time:Math.floor((Date.now()-7776e6)/1e3)},all:{list:[],loading:!1,finished:!1,time:Math.floor(new Date(2021,5,12).getTime()/1e3)}}},computed:{role:function(){return this.$route.query.role}},methods:{finiText:function(){return this[this.actTab].list.length>0?this.$t("message.noMore"):this.$t("message.noData")},watchAddress:function(){this.$route.query.user?(this.type="mer-user",this.title=this.$t("home.user")+this.addressShort(this.$route.query.user)+this.$t("home.disposeDetail"),this.curAddress=this.$route.query.user):this.$route.query.referrer?(this.type="referrer",this.title=this.$t("home.referrer")+this.addressShort(this.$route.query.referrer)+this.$t("home.recommendDetail"),this.curAddress=this.$route.query.referrer):this.$route.query.merchant?(this.type="merchant",this.title=this.$t("home.merchant")+this.addressShort(this.$route.query.merchant)+this.$t("home.recommendDetail"),this.curAddress=this.$route.query.merchant):this.MyGo(-1),this.list=[],this.onLoad()},addressShort:function(e){return"..."+e.slice(e.length-4)},addressChange:function(e){return e.slice(0,6)+"......"+e.slice(e.length-10)},reqMerchantUserList:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var s,i,a,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.actTab,i=Math.ceil(e[s].list.length/e.pageSize),t.prev=3,t.next=6,e.$apollo.query({query:Object(n.a)(h()),fetchPolicy:"no-cache",variables:{first:e.pageSize,skip:i*e.pageSize,token:u.f,from:e.curAddress,to:e.address,time:Math.floor(e[s].time)}});case 6:o=t.sent,c=o.data.logs,(a=e[s].list).push.apply(a,Object(r.a)(c)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3);case 15:e[s].loading=!1,e[s].list.length<(i+1)*e.pageSize&&(e[e.actTab].finished=!0),e[e.actTab].finished=!0;case 18:case"end":return t.stop()}}),t,null,[[3,12]])})))()},reqMerchantReferrerList:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var s,i,a,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.actTab,i=Math.ceil(e[s].list.length/e.pageSize),t.prev=2,t.next=5,e.$apollo.query({query:Object(n.a)(d()),fetchPolicy:"no-cache",variables:{first:e.pageSize,skip:i*e.pageSize,token:u.f,mid:e.curAddress,to:e.address,time:Math.floor(e[s].time)}});case 5:o=t.sent,c=o.data.logs,(a=e[s].list).push.apply(a,Object(r.a)(c)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2);case 14:e[s].loading=!1,e[s].list.length<(i+1)*e.pageSize&&(e[e.actTab].finished=!0),e[e.actTab].finished=!0;case 17:case"end":return t.stop()}}),t,null,[[2,11]])})))()},reqLogList:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$route.query.user?e.reqMerchantUserList():(e.$route.query.referrer||e.$route.query.merchant)&&e.reqMerchantReferrerList();case 1:case"end":return t.stop()}}),t)})))()},onRefresh:function(){this.$store.state.address&&(this.refreshing&&(this.refreshing=!1),this[this.actTab].finished=!1,this[this.actTab].list=[],this.onLoad())},onLoad:function(){this.$store.state.address&&(this[this.actTab].loading=!0,this.reqLogList())},handleTab:function(e){this.actTab=e,0===this[e].list.length&&this.onLoad()},handleBack:function(){this.MyGo(-1)},copyCallback:Object(l.a)((function(){this.$toast.success(this.$t("message.addressCopied"))}),350)}},m=(s("a0d4"),s("2877")),p=Object(m.a)(f,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"detail-wrapper"},[s("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[s("TheHeader",{attrs:{title:e.title},on:{"click-left":e.handleBack}}),s("div",{staticClass:"top-deco"}),s("div",{staticClass:"content"},[s("div",{staticClass:"tabs tabs-wrap"},[s("div",{staticClass:"tab week",class:{active:"wk"===e.actTab},on:{click:function(t){return e.handleTab("wk")}}},[e._v(e._s(e.$t("home.week")))]),s("div",{staticClass:"tab mounth",class:{active:"m1"===e.actTab},on:{click:function(t){return e.handleTab("m1")}}},[e._v(e._s(e.$t("home.mounth1")))]),s("div",{staticClass:"tab mounth-3",class:{active:"m3"===e.actTab},on:{click:function(t){return e.handleTab("m3")}}},[e._v(e._s(e.$t("home.mounth3")))]),s("div",{staticClass:"tab all",class:{active:"all"===e.actTab},on:{click:function(t){return e.handleTab("all")}}},[e._v(e._s(e.$t("home.all")))])]),s("div",{staticClass:"total-wrap"},["user"===e.type?s("div",{staticClass:"tsr row"},[s("span",{staticClass:"tit"},[e._v(e._s(e.$t("home.amount")))]),s("span",{staticClass:"val"},[e._v("-"+e._s(e.fromWei(e.$route.query.amount||"0"))+" TSR")])]):e._e(),s("div",{staticClass:"dst row"},[s("span",{staticClass:"tit"},[e._v(e._s(e.$t("home.total")))]),s("span",{staticClass:"val"},[e._v(e._s(e.fromWei(e.$route.query.amount||"0"))+" DST")])])]),s("div",{staticClass:"tab-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"wk"===e.actTab,expression:"actTab === 'wk'"}],staticClass:"tab-panel"},[s("van-list",{attrs:{finished:e.wk.finished,"finished-text":e.finiText(),"immediate-check":!0},on:{load:e.onLoad},model:{value:e.wk.loading,callback:function(t){e.$set(e.wk,"loading",t)},expression:"wk.loading"}},[e.wk.list.length?e._e():s("TheLogEmpty"),e._l(e.wk.list,(function(t,r){return s("TheLogItem",{key:r,attrs:{item:t,type:e.type}})}))],2)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"m1"===e.actTab,expression:"actTab === 'm1'"}],staticClass:"tab-panel"},[s("van-list",{attrs:{finished:e.m1.finished,"finished-text":e.finiText(),"immediate-check":!0},on:{load:e.onLoad},model:{value:e.m1.loading,callback:function(t){e.$set(e.m1,"loading",t)},expression:"m1.loading"}},[e.m1.list.length?e._e():s("TheLogEmpty"),e._l(e.m1.list,(function(t,r){return s("TheLogItem",{key:r,attrs:{item:t,type:e.type}})}))],2)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"m3"===e.actTab,expression:"actTab === 'm3'"}],staticClass:"tab-panel"},[s("van-list",{attrs:{finished:e.m3.finished,"finished-text":e.finiText(),"immediate-check":!0},on:{load:e.onLoad},model:{value:e.m3.loading,callback:function(t){e.$set(e.m3,"loading",t)},expression:"m3.loading"}},[e.m3.list.length?e._e():s("TheLogEmpty"),e._l(e.m3.list,(function(t,r){return s("TheLogItem",{key:r,attrs:{item:t,type:e.type}})}))],2)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"all"===e.actTab,expression:"actTab === 'all'"}],staticClass:"tab-panel"},[s("van-list",{attrs:{finished:e.all.finished,"finished-text":e.finiText(),"immediate-check":!0},on:{load:e.onLoad},model:{value:e.all.loading,callback:function(t){e.$set(e.all,"loading",t)},expression:"all.loading"}},[e.all.list.length?e._e():s("TheLogEmpty"),e._l(e.all.list,(function(t,r){return s("TheLogItem",{key:r,attrs:{item:t,type:e.type}})}))],2)],1)])])],1)],1)}),[],!1,null,"666c1645",null);t.default=p.exports},"6be2":function(e,t,s){"use strict";s.r(t);s("fb6a");var r=s("8785"),i=(s("96cf"),s("1da1")),a=s("5184"),n=s("a953"),o=s("35ad");function c(){var e=Object(r.a)(["query ($id: ID!, $first: Int!, $skip: Int!) {\n            mid(id: $id) {\n                id\n                address\n                token\n                amount\n                midSeller(first: $first, skip: $skip){\n                  id\n                  sellerAddress\n                  amount\n                }\n              }\n            }"]);return c=function(){return e},e}function l(){var e=Object(r.a)(["query ($id: ID!, $first: Int!, $skip: Int!) {\n            seller(id: $id) {\n                id\n                address\n                token\n                amount\n                midSeller(first: $first, skip: $skip){\n                  id\n                  midAddress\n                  amount\n                }\n              }\n            }"]);return l=function(){return e},e}function u(){var e=Object(r.a)(["query ($id: ID!, $first: Int!, $skip: Int!) {\n            seller(id: $id) {\n                id\n                address\n                token\n                amount\n                sellerUser(first: $first, skip: $skip){\n                  id\n                  userAddress\n                  amount\n                }\n              }\n            }"]);return u=function(){return e},e}var d={components:{},data:function(){return{from:"",title:"ooo",type:"user",refreshing:!1,listLoading:!1,listFinished:!0,pageNo:0,pageSize:20,list:[]}},computed:{role:function(){return this.$route.query.role},dataText:function(){return this.list.length>0?this.$t("message.noMore"):this.$t("message.noData")}},created:function(){},mounted:function(){},methods:{watchAddress:function(){this.list=[],this.from=this.$route.query.from,"user"===this.$route.query.role?(this.type="user",this.title=this.$t("home.userList"),this.queryUser(this.from)):"referrer"===this.$route.query.role?(this.type="referrer",this.title=this.$t("home.referrerList"),this.queryReferrer(this.from)):"merchant"===this.$route.query.role?(this.type="merchant",this.title=this.$t("home.merchantList"),this.queryMerchant(this.from)):this.MyGo(-1)},addressChange:function(e){return e.slice(0,4)+"......"+e.slice(e.length-6)},queryUser:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function s(){var r,i,n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=Math.ceil(t.list.length/t.pageSize),s.prev=1,s.next=4,t.$apollo.query({query:Object(a.a)(u()),fetchPolicy:"no-cache",variables:{id:o.f+e,first:t.pageSize,skip:r*t.pageSize}});case 4:i=s.sent,n=i.data.seller.sellerUser,t.list=n,s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1);case 13:t.$toast.clear(),t.listLoading=!1,t.list.length<(r+1)*t.pageSize&&(t.listFinished=!0);case 16:case"end":return s.stop()}}),s,null,[[1,10]])})))()},queryReferrer:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function s(){var r,i,n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=Math.ceil(t.list.length/t.pageSize),s.prev=1,s.next=4,t.$apollo.query({query:Object(a.a)(l()),fetchPolicy:"no-cache",variables:{id:o.f+e,first:t.pageSize,skip:r*t.pageSize}});case 4:i=s.sent,n=i.data.seller.midSeller,t.list=n,s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1);case 13:t.$toast.clear(),t.listLoading=!1,t.list.length<(r+1)*t.pageSize&&(t.listFinished=!0);case 16:case"end":return s.stop()}}),s,null,[[1,10]])})))()},queryMerchant:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function s(){var r,i,n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=Math.ceil(t.list.length/t.pageSize),s.prev=1,s.next=4,t.$apollo.query({query:Object(a.a)(c()),fetchPolicy:"no-cache",variables:{id:o.f+e,first:t.pageSize,skip:r*t.pageSize}});case 4:i=s.sent,n=i.data.mid.midSeller,t.list=n,s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1);case 13:t.$toast.clear(),t.listLoading=!1,t.list.length<(r+1)*t.pageSize&&(t.listFinished=!0);case 16:case"end":return s.stop()}}),s,null,[[1,10]])})))()},reqList:function(){"user"===this.$route.query.role?this.queryUser(this.from):"referrer"===this.$route.query.role?this.queryReferrer(this.from):"cooperator"===this.$route.query.role&&this.queryMerchant(this.from)},onRefresh:function(){this.$store.state.address&&(this.refreshing&&(this.refreshing=!1),this.listFinished=!1,this.list=[],this.onLoad())},onLoad:function(){this.$store.state.address&&(this.listLoading=!0,this.reqList())},handleToDetail:function(e){var t={};"user"===this.type?t={user:e.userAddress,amount:e.amount}:"referrer"===this.type?t={referrer:e.midAddress,amount:e.amount}:"merchant"===this.type&&(t={merchant:e.sellerAddress,amount:e.amount}),this.$router.push({path:"/details",query:t})},handleBack:function(){this.MyGo(-1)},copyCallback:Object(n.a)((function(){this.$toast.success(this.$t("message.addressCopied"))}),350)}},h=(s("e8f1"),s("2877")),f=Object(h.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"role-wrapper"},[r("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[r("TheHeader",{attrs:{title:e.title},on:{"click-left":e.handleBack}}),r("div",{staticClass:"top-deco"}),r("div",{staticClass:"content content-table"},["user"===e.type?r("div",{staticClass:"tr tr-head"},[r("div",{staticClass:"td no"},[e._v(e._s(e.$t("home.no")))]),r("div",{staticClass:"td address"},[e._v(e._s(e.$t("home.userAddress")))]),r("div",{staticClass:"td amount"},[e._v(e._s(e.$t("home.userDisposeAmount")))])]):e._e(),"referrer"===e.type?r("div",{staticClass:"tr tr-head"},[r("div",{staticClass:"td no"},[e._v(e._s(e.$t("home.no")))]),r("div",{staticClass:"td address"},[e._v(e._s(e.$t("home.referrerAddress")))]),r("div",{staticClass:"td amount"},[e._v(e._s(e.$t("home.referrerAmount")))])]):e._e(),"merchant"===e.type?r("div",{staticClass:"tr tr-head"},[r("div",{staticClass:"td no"},[e._v(e._s(e.$t("home.no")))]),r("div",{staticClass:"td address"},[e._v(e._s(e.$t("home.merchantAddress")))]),r("div",{staticClass:"td amount"},[e._v(e._s(e.$t("home.referrerAmount")))])]):e._e(),e.list.length?e._e():r("div",{staticClass:"empty-wrap"},[r("img",{staticClass:"img-empty",attrs:{src:s("2724"),alt:""}})]),r("van-list",{attrs:{finished:e.listFinished,"finished-text":e.dataText},on:{load:e.onLoad},model:{value:e.listLoading,callback:function(t){e.listLoading=t},expression:"listLoading"}},e._l(e.list,(function(t,s){return r("div",{key:s,staticClass:"tr tb",on:{click:function(s){return e.handleToDetail(t)}}},[r("div",{staticClass:"td no"},[e._v(e._s(s+1))]),r("div",{staticClass:"td address"},[e._v(e._s(e.addressChange(t.userAddress||t.midAddress||t.sellerAddress)))]),r("div",{staticClass:"td amount"},[e._v(" "+e._s(e.fromWei(t.amount))+" DST ")]),r("van-icon",{attrs:{name:"arrow"}})],1)})),0)],1),r("div",{staticClass:"coop-mail"},[e._v(e._s(e.$t("home.cooperationEmail")))])],1)],1)}),[],!1,null,"13418ffc",null);t.default=f.exports},8785:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s("fb6a"),s("dca8");function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},"88e6":function(e,t,s){},a0d4:function(e,t,s){"use strict";s("c0b7")},bb2f:function(e,t,s){var r=s("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c0b7:function(e,t,s){},dca8:function(e,t,s){var r=s("23e7"),i=s("bb2f"),a=s("d039"),n=s("861d"),o=s("f183").onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:a((function(){c(1)})),sham:!i},{freeze:function(e){return c&&n(e)?c(o(e)):e}})},e8f1:function(e,t,s){"use strict";s("88e6")},f183:function(e,t,s){var r=s("d012"),i=s("861d"),a=s("5135"),n=s("9bf2").f,o=s("90e3"),c=s("bb2f"),l=o("meta"),u=0,d=Object.isExtensible||function(){return!0},h=function(e){n(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},f=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,l)){if(!d(e))return"F";if(!t)return"E";h(e)}return e[l].objectID},getWeakData:function(e,t){if(!a(e,l)){if(!d(e))return!0;if(!t)return!1;h(e)}return e[l].weakData},onFreeze:function(e){return c&&f.REQUIRED&&d(e)&&!a(e,l)&&h(e),e}};r[l]=!0},f588:function(e,t,s){"use strict";var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"empty-wrap"},[t("img",{staticClass:"img-empty",attrs:{src:s("2724"),alt:""}})])}],i={props:{item:{type:Object,default:function(){}},type:{type:String,default:"user"}}},a=(s("541d"),s("2877")),n=Object(a.a)(i,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),r,!1,null,"9f51d59c",null);t.a=n.exports},f733:function(e,t,s){"use strict";s("0522")}}]);